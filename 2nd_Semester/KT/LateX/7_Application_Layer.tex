\section{Application Layer}

\subsubsection{Netzwerk-Applikationen und Protokolle}

\subsection{Domain Name System}

\begin{definition}{DNS - Domain Name Space}
    \begin{itemize}
        \item Leserliche Darstellung von IP-Adressen (Name Resolution)
        \item Hauptdomäne = Root
        \item Der Fully Qualified Domain Name (FQDN) muss eindeutig sein, Beispiel: sw.eng.
        \item Geschwisterknoten dürfen nicht den gleichen Namen haben
    \end{itemize}
        \includegraphics[width=0.5\linewidth]{images/dns.png}
\end{definition}

\begin{concept}{Verwaltung von Domains}
    \begin{itemize}
        \item Das DNS wird verteilt betrieben (verteilt, nicht repliziert): Name Server
        \item Ein Name Server ist meist für eine Zone verantwortlich
        \begin{itemize}
            \item Zone: separat administrierter Subtree des DNS, oft eine Domain
            \item Ein Name Server kennt
            \begin{itemize}
                \item die IP-Adressen zu den Hostnamen in seiner Zone
                \item die IP-Adressen der Name Server seiner Subdomänen, falls diese nicht in seiner Zone liegen
                \item die IP-Adressen von Root und TLD Name Server, um beliebige Abfragen zu erlauben
            \end{itemize}
        \end{itemize}
        \item Aus Redundanzgründen mindestens zwei Name Server für eine Zone
        \begin{itemize}
            \item Primary (Master) Name Server und Secondary (Slave) Name Server
        \end{itemize}
        \item Ein NS kann eine Unterzone seiner Zone weiter delegieren
    \end{itemize}
\end{concept}

\begin{example2}{DNS-Abfragen auswerten}
    \begin{itemize}
        \item DNS verwendet Port 53 (UDP)
        \item Resolver: lokale Software, die mit dem Name Server kommuniziert
    \end{itemize}
    Beispiel: Anwendung benötigt die IP-Adresse von bob.sw.eng.
    \begin{itemize}
        \item FQDN: bob.sw.eng. 
        \item Root: .
        \item Top Level Domain: eng
        \item Second Level Domain: sw
    \end{itemize}
        \includegraphics[width=1\linewidth]{images/example_dns.png}\\
        \includegraphics[width=1\linewidth]{images/dns_explained.png}
\end{example2}

\begin{definition}{DNS Record Types}\\
    Der "Record Type" enthält Information, welche Daten angefragt beziehungsweise in einer
    Antwort vom Name Server mitgeteilt werden\\
    \includegraphics[width=1\linewidth]{images/dns_record_types.png}
\end{definition}

\begin{definition}{Reverse DNS Lookup}\\
    Authentisierung: Ein Server identifiziert/authentifiziert einen Client anhand des Namens, nicht anhand der IP-Adresse
\end{definition}

\subsection{DHCP - Dynamic Host Configuration Protocol}

\begin{definition}{Bezug IP-Adresse}\\
    Wie erhält ein Knoten seine IP-Adresse?
    \begin{itemize}
        \item Lokal konfiguriert (static IP)
        \item Bezug der IP-Adresse über das Netzwerk
        \begin{itemize}
            \item DHCP – erlaubt dynamische Zuteilung aus dem lokalen Adressbereich
        \end{itemize}
    \end{itemize}
\end{definition}

\begin{concept}{Dynamische Zuweisung von IP-Adressen}
    \begin{itemize}
        \item Client verlangt eine IP-Adresse (DHCP Request)
        \item DHCP-Server erteilt eine freie Adresse für definierte Lease Time, oft 10 Minuten (DHCP-Response)
        \item Vor Ablauf der Lease Time muss der Lease (vom Client) erneuert werden
        \item Client, der das Netz verlässt, wird Lease nicht erneuern → Adresse wieder frei
    \end{itemize}
\end{concept}

\begin{definition}{DHCP - Dynamic Host Configuration Protocol}
    \begin{itemize}
        \item Dynamische Zuweisung von IP-Adressen
        \item Reserviert nur IP’s von aktiven Geräte
    \end{itemize}
    \includegraphics[width=1\linewidth]{images/bootp.png}
\end{definition}

\begin{KR}{Ablauf DHCP}
    \begin{enumerate}
        \item Client sucht DHCP Server mittels Broadcast
        \item DHCP Server antwortet (DHCP offer)
        \item Der Client wählt einen Server und fordert eine Auswahl der angebotenen Parameter (DHCP request)
        \item Der Server bestätigt mit einer Message, welche die endgültigen Parameter enthält
        \item Vor Ablauf der Lease-Time erneuert der Client die Adresse.
    \end{enumerate}
\end{KR}

\begin{definition}{DHCP Paketformat}\\
    \includegraphics[width=1\linewidth]{images/dhcp_format1.png}\\
    \includegraphics[width=1\linewidth]{images/dhcp_format2.png}
\end{definition}

\begin{definition}{TFTP -Trivial File Transfer Protocol}\\
    Basiert auf UDP\\
        \includegraphics[width=1\linewidth]{images/tftp1.png}\\
        \includegraphics[width=1\linewidth]{images/tftp2.png}
\end{definition}

\subsection{NAT - Network Address Translation}

\begin{definition}{NAT (Port Mapping)}
    \begin{itemize}
        \item NAT (Historisch) Sicherheit durch «Verstecken» von lokalen Adressen
        \item NAPT (Port Trans.) Lokale IP-Adresse → Öffentliche IP-Adresse
    \end{itemize}
    NAT verletzt das Konzept der OSI-Layer, da eine Network-Funktion auf den Transport-Header zugreift. IP-Adresse und Portnummer werden dabei verändert. \\
        \includegraphics[width=1\linewidth]{images/NAT.png}
\end{definition}

\textbf{NAT ist das letzte Prüfungsrelevante Thema!!!}

\begin{KR}{Key Takes Applikationsprotokolle}
    \begin{itemize}
        \item Das Domain Name System (DNS) erlaubt übersetzt Hostnamen in IP Adressen und umgekehrt
        \begin{itemize}
            \item Besteht aus einem hierarchischen DNS Name Space
            \item Das DNS wird auf einer grossen Anzahl Name Server verteilt betrieben, ein Name Server ist jeweils für eine Zone verantwortlich (z.B. zhaw.ch)
        \end{itemize}
        \item DHCP erlaubt einem Rechner, seine IP Konfiguration von einem Server zu beziehen
        \item TFTP ist ein einfaches, aber zuverlässiges File Transfer Protocol, welches z.B. diskless Systemen dazu dient, das Betriebssystem Image vom Server zu beziehen
        \item HTTP erlaubt den Zugriff auf verteilte Dokumente, die mittels Uniform Resource Locator (URL) eindeutig adressiert werden
        \item Network Address Translation (NAT) erlaubt die Wiederverwendung privater IP-Adressen
    \end{itemize}
\end{KR}

\begin{definition}{HTTP - Hypertext Transfer Protocol}
    \begin{itemize}
        \item WWW basiert auf HTTP
    \end{itemize}
    Funktionsweise von HTTP
    \begin{itemize}
        \item Basiert auf TCP, Port 80
        \item ASCII-Basiert, MIME-Typen, Codierungen
        \item Transaktionsbasiert: HTTP Request → HTTP Response
    \end{itemize}
\end{definition}


